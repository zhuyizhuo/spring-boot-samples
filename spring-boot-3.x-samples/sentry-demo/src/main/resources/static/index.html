<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sentry å¼‚å¸¸ä¸ŠæŠ¥æµ‹è¯•é¡µé¢</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f5f7fa;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px 0;
            text-align: center;
            margin-bottom: 40px;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 700;
        }
        
        .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .intro {
            background: white;
            padding: 30px;
            margin-bottom: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        .intro p {
            margin-bottom: 15px;
            line-height: 1.8;
            color: #666;
        }
        
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
        
        .feature-card {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }
        
        .feature-card h3 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.3em;
        }
        
        .feature-card p {
            color: #666;
            margin-bottom: 20px;
        }
        
        .btn {
            display: inline-block;
            padding: 12px 24px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            outline: none;
        }
        
        .btn:hover {
            background: #5a67d8;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .btn-red {
            background: #e53e3e;
        }
        
        .btn-red:hover {
            background: #c53030;
            box-shadow: 0 4px 12px rgba(229, 62, 62, 0.4);
        }
        
        .btn-yellow {
            background: #d69e2e;
        }
        
        .btn-yellow:hover {
            background: #b7791f;
            box-shadow: 0 4px 12px rgba(214, 158, 46, 0.4);
        }
        
        .btn-green {
            background: #38a169;
        }
        
        .btn-green:hover {
            background: #2f855a;
            box-shadow: 0 4px 12px rgba(56, 161, 105, 0.4);
        }
        
        .btn-purple {
            background: #9f7aea;
        }
        
        .btn-purple:hover {
            background: #805ad5;
            box-shadow: 0 4px 12px rgba(159, 122, 234, 0.4);
        }
        
        .btn-blue {
            background: #3182ce;
        }
        
        .btn-blue:hover {
            background: #2c5282;
            box-shadow: 0 4px 12px rgba(49, 130, 206, 0.4);
        }
        
        .results-section {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            margin-bottom: 40px;
        }
        
        .results-section h2 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 1.8em;
        }
        
        #results {
            min-height: 200px;
            padding: 20px;
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 6px;
            font-family: 'Courier New', Courier, monospace;
            font-size: 14px;
            line-height: 1.5;
            white-space: pre-wrap;
            overflow-x: auto;
        }
        
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: 10px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .response-time {
            font-size: 12px;
            color: #999;
            margin-top: 5px;
        }
        
        .success-message {
            color: #38a169;
            font-weight: 600;
        }
        
        .error-message {
            color: #e53e3e;
            font-weight: 600;
        }
        
        .info-message {
            color: #3182ce;
        }
        
        footer {
            text-align: center;
            padding: 30px 0;
            color: #666;
            font-size: 14px;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            h1 {
                font-size: 2em;
            }
            
            .feature-grid {
                grid-template-columns: 1fr;
            }
            
            .feature-card {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Sentry å¼‚å¸¸ä¸ŠæŠ¥æµ‹è¯•å¹³å°</h1>
            <p class="subtitle">é€šè¿‡ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®è§¦å‘ä¸åŒç±»å‹çš„å¼‚å¸¸ï¼Œæµ‹è¯• Sentry å¼‚å¸¸ç›‘æ§åŠŸèƒ½</p>
        </header>
        
        <div class="intro">
            <p>æ¬¢è¿ä½¿ç”¨ Sentry å¼‚å¸¸ä¸ŠæŠ¥æµ‹è¯•å¹³å°ï¼è¿™ä¸ªé¡µé¢æä¾›äº†å¤šç§æŒ‰é’®ï¼Œç”¨äºè§¦å‘ä¸åŒç±»å‹çš„å¼‚å¸¸å’Œäº‹ä»¶ä¸ŠæŠ¥åˆ° Sentry æœåŠ¡ã€‚</p>
            <p>ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®åï¼Œç³»ç»Ÿå°†å‘å¯¹åº”çš„åç«¯æ¥å£å‘é€è¯·æ±‚ï¼Œå¹¶åœ¨å³ä¾§ç»“æœåŒºåŸŸæ˜¾ç¤ºè¯·æ±‚çš„å“åº”ä¿¡æ¯ã€‚æ‚¨å¯ä»¥é€šè¿‡æŸ¥çœ‹ Sentry æ§åˆ¶å°æ¥éªŒè¯å¼‚å¸¸æ˜¯å¦æˆåŠŸä¸ŠæŠ¥ã€‚</p>
        </div>
        
        <div class="feature-grid">
            <div class="feature-card">
                <h3>æ­£å¸¸æ¥å£æµ‹è¯•</h3>
                <p>æµ‹è¯•æ­£å¸¸è¯·æ±‚çš„å¤„ç†æµç¨‹ï¼Œä¸è§¦å‘ä»»ä½•å¼‚å¸¸</p>
                <button class="btn btn-green" onclick="callApi('/sentry-demo/api/sentry/normal', this)">è§¦å‘æ­£å¸¸è¯·æ±‚</button>
            </div>
            
            <div class="feature-card">
                <h3>è‡ªåŠ¨æ•è·å¼‚å¸¸</h3>
                <p>è§¦å‘ä¸€ä¸ªè¿è¡Œæ—¶å¼‚å¸¸ï¼Œç”± Sentry è‡ªåŠ¨æ•è·å¹¶ä¸ŠæŠ¥</p>
                <button class="btn btn-red" onclick="callApi('/sentry-demo/api/sentry/exception', this)">è§¦å‘è‡ªåŠ¨å¼‚å¸¸</button>
            </div>
            
            <div class="feature-card">
                <h3>æ‰‹åŠ¨å¼‚å¸¸ä¸ŠæŠ¥</h3>
                <p>è§¦å‘ä¸€ä¸ªå¼‚å¸¸ï¼Œåœ¨ä»£ç ä¸­æ‰‹åŠ¨æ•è·å¹¶å‘é€åˆ° Sentry</p>
                <button class="btn btn-yellow" onclick="callApi('/sentry-demo/api/sentry/manual-exception', this)">è§¦å‘æ‰‹åŠ¨å¼‚å¸¸</button>
            </div>
            
            <div class="feature-card">
                <h3>æ€§èƒ½ç›‘æ§æµ‹è¯•</h3>
                <p>æµ‹è¯• Sentry çš„æ€§èƒ½ç›‘æ§åŠŸèƒ½</p>
                <button class="btn btn-blue" onclick="callApi('/sentry-demo/api/sentry/performance', this)">è§¦å‘æ€§èƒ½ç›‘æ§</button>
            </div>
            
            <div class="feature-card">
                <h3>æœåŠ¡å±‚å¼‚å¸¸</h3>
                <p>è§¦å‘æœåŠ¡å±‚çš„å¼‚å¸¸ï¼Œæµ‹è¯•å¤šå±‚è°ƒç”¨çš„å¼‚å¸¸æ•è·</p>
                <button class="btn btn-purple" onclick="callApi('/sentry-demo/api/sentry/service-exception', this)">è§¦å‘æœåŠ¡å±‚å¼‚å¸¸</button>
            </div>
            
            <div class="feature-card">
                <h3>æ…¢æ“ä½œæµ‹è¯•</h3>
                <p>æµ‹è¯•æ…¢æ“ä½œçš„æ€§èƒ½ç›‘æ§ï¼ˆæ¨¡æ‹Ÿ3ç§’å»¶è¿Ÿï¼‰</p>
                <button class="btn btn-blue" onclick="callApi('/sentry-demo/api/sentry/slow-operation', this)">è§¦å‘æ…¢æ“ä½œ</button>
            </div>
            
            <div class="feature-card">
                <h3>è‡ªå®šä¹‰æ ‡ç­¾æµ‹è¯•</h3>
                <p>æµ‹è¯•å¸¦æœ‰è‡ªå®šä¹‰æ ‡ç­¾çš„å¼‚å¸¸ä¸ŠæŠ¥</p>
                <button class="btn btn-green" onclick="callApi('/sentry-demo/api/sentry/custom-tags', this)">è§¦å‘è‡ªå®šä¹‰æ ‡ç­¾</button>
            </div>
            
            <div class="feature-card">
                <h3>ç”¨æˆ·ä¿¡æ¯è·Ÿè¸ª</h3>
                <p>æµ‹è¯•ç”¨æˆ·ä¿¡æ¯çš„è·Ÿè¸ªå’Œå…³è”</p>
                <button class="btn btn-yellow" onclick="callUserTrackingApi(this)">è§¦å‘ç”¨æˆ·è·Ÿè¸ª</button>
            </div>
        </div>
        
        <div class="results-section">
            <h2>è¯·æ±‚ç»“æœ</h2>
            <div id="results">ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®å¼€å§‹æµ‹è¯•...</div>
        </div>
        
        <footer>
            <p>Â© 2024 Sentry Demo æµ‹è¯•å¹³å° | ä½¿ç”¨ Spring Boot + Sentry æ„å»º</p>
        </footer>
    </div>
    
    <script>
        // APIè°ƒç”¨å‡½æ•°
        async function callApi(endpoint, button) {
            const resultsDiv = document.getElementById('results');
            const originalText = button.textContent;
            
            try {
                // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
                button.innerHTML = '<span class="loading"></span>å¤„ç†ä¸­...';
                button.disabled = true;
                
                // è®°å½•å¼€å§‹æ—¶é—´
                const startTime = performance.now();
                
                // æ˜¾ç¤ºè¯·æ±‚ä¿¡æ¯
                resultsDiv.innerHTML = `æ­£åœ¨è¯·æ±‚: ${endpoint}\n\nç­‰å¾…å“åº”ä¸­...`;
                
                // å‘é€è¯·æ±‚
                const response = await fetch(endpoint);
                
                // è®¡ç®—å“åº”æ—¶é—´
                const endTime = performance.now();
                const responseTime = (endTime - startTime).toFixed(2);
                
                // åœ¨ä»»ä½•è¯»å–æ“ä½œä¹‹å‰å…ˆå…‹éš†å“åº”å¯¹è±¡
                const clonedResponse = response.clone();
                
                // å°è¯•è§£æå“åº”
                let result;
                try {
                    // å…ˆå°è¯•ä½¿ç”¨åŸå§‹å“åº”å¯¹è±¡è§£æJSON
                    result = await response.json();
                } catch (e) {
                    // å¦‚æœJSONè§£æå¤±è´¥ï¼Œä½¿ç”¨é¢„å…ˆå…‹éš†çš„å¯¹è±¡è¯»å–æ–‡æœ¬
                    try {
                        const textContent = await clonedResponse.text();
                        result = { error: 'æ— æ³•è§£æJSONå“åº”', responseText: textContent };
                    } catch (textError) {
                        result = { error: 'æ— æ³•è§£æå“åº”', originalError: e.message };
                    }
                }
                
                // æ˜¾ç¤ºç»“æœ
                let resultHtml = `è¯·æ±‚: ${endpoint}\n`;
                resultHtml += `çŠ¶æ€ç : ${response.status} ${response.statusText}\n`;
                resultHtml += `å“åº”æ—¶é—´: ${responseTime} ms\n\n`;
                
                if (response.ok) {
                    resultHtml += `<span class="success-message">âœ… è¯·æ±‚æˆåŠŸ</span>\n`;
                } else {
                    resultHtml += `<span class="error-message">âŒ è¯·æ±‚å¤±è´¥</span>\n`;
                }
                
                resultHtml += `\nå“åº”æ•°æ®:\n${JSON.stringify(result, null, 2)}`;
                resultsDiv.innerHTML = resultHtml;
                
            } catch (error) {
                resultsDiv.innerHTML = `è¯·æ±‚: ${endpoint}\n\n<span class="error-message">âŒ å‘ç”Ÿé”™è¯¯: ${error.message}</span>`;
            } finally {
                // æ¢å¤æŒ‰é’®çŠ¶æ€
                button.textContent = originalText;
                button.disabled = false;
            }
        }
        
        // ç”¨æˆ·è·Ÿè¸ªAPIè°ƒç”¨
        async function callUserTrackingApi(button) {
            const resultsDiv = document.getElementById('results');
            const originalText = button.textContent;
            
            try {
                button.innerHTML = '<span class="loading"></span>å¤„ç†ä¸­...';
                button.disabled = true;
                
                const startTime = performance.now();
                
                resultsDiv.innerHTML = 'æ­£åœ¨è¯·æ±‚ç”¨æˆ·è·Ÿè¸ªæ¥å£...\n\nç­‰å¾…å“åº”ä¸­...';
                
                // æ„å»ºç”¨æˆ·æ•°æ®
                const userData = {
                    id: 'test-user-' + Date.now(),
                    username: 'testuser',
                    email: 'test@example.com'
                };
                
                // å‘é€POSTè¯·æ±‚
                const response = await fetch('/sentry-demo/api/sentry/user-tracking', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(userData)
                });
                
                const endTime = performance.now();
                const responseTime = (endTime - startTime).toFixed(2);
                
                // åœ¨ä»»ä½•è¯»å–æ“ä½œä¹‹å‰å…ˆå…‹éš†å“åº”å¯¹è±¡
                const clonedResponse = response.clone();
                
                let result;
                try {
                    result = await response.json();
                } catch (e) {
                    // å¦‚æœJSONè§£æå¤±è´¥ï¼Œä½¿ç”¨é¢„å…ˆå…‹éš†çš„å¯¹è±¡è¯»å–æ–‡æœ¬
                    result = { error: 'æ— æ³•è§£æJSONå“åº”', responseText: await clonedResponse.text() };
                }
                
                let resultHtml = `è¯·æ±‚: /api/sentry/user-tracking (POST)\n`;
                resultHtml += `çŠ¶æ€ç : ${response.status} ${response.statusText}\n`;
                resultHtml += `å“åº”æ—¶é—´: ${responseTime} ms\n\n`;
                resultHtml += `å‘é€çš„ç”¨æˆ·æ•°æ®:\n${JSON.stringify(userData, null, 2)}\n\n`;
                
                if (response.ok) {
                    resultHtml += `<span class="success-message">âœ… è¯·æ±‚æˆåŠŸ</span>\n`;
                } else {
                    resultHtml += `<span class="error-message">âŒ è¯·æ±‚å¤±è´¥</span>\n`;
                }
                
                resultHtml += `\nå“åº”æ•°æ®:\n${JSON.stringify(result, null, 2)}`;
                resultsDiv.innerHTML = resultHtml;
                
            } catch (error) {
                resultsDiv.innerHTML = `è¯·æ±‚ç”¨æˆ·è·Ÿè¸ªæ¥å£æ—¶å‘ç”Ÿé”™è¯¯: ${error.message}`;
            } finally {
                button.textContent = originalText;
                button.disabled = false;
            }
        }
        
        // æ·»åŠ é¡µé¢åŠ è½½å®Œæˆåçš„åˆå§‹åŒ–é€»è¾‘
        window.addEventListener('load', function() {
            console.log('Sentryæµ‹è¯•é¡µé¢å·²åŠ è½½å®Œæˆ');
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML += '\n\nğŸ’¡ æç¤ºï¼šç‚¹å‡»ä¸Šæ–¹æŒ‰é’®å¼€å§‹æµ‹è¯•å„ç§å¼‚å¸¸åœºæ™¯';
        });
    </script>
</body>
</html>